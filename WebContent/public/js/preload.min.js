$.QianLoad = {
	PageLoading : function(options) {
		var defaults = {
			delayTime : 500,
			sleep : 0,
			css : '<style>body{margin:0}.load-wrap{width:100%;height:100%;position:absolute;top:0;left:0;}#pre-load{position:fixed;top:0;height:4px;background:#d0fefe;transition:opacity .5s linear}#pre-load span{position:absolute;width:150px;height:2px;-webkit-border-radius:100%;-webkit-box-shadow:#905AC2 1px 0 6px 1px;opacity:1;right:-10px;-webkit-animation:pulse 2s ease-out 0s infinite}@-webkit-keyframes pulse{30%{opacity:.6}60%{opacity:0}to{opacity:.6}}</style>'
		};
		var options = $.extend(defaults, options);
		$('head').append(defaults.css);
		var _LoadingHtml = '<div class="load-wrap"><div id="pre-load">'
				+ '<span></span>' + '</div></div>';
		$("body").append(_LoadingHtml);
		document.onreadystatechange = PageLoaded;
		function PageLoaded() {
			var loadingMask = $('#pre-load');
			$({
				property : 0
			}).animate({
				property : 98
			}, {
				duration : 1000,
				step : function() {
					var percentage = Math.round(this.property);
					loadingMask.css('width', percentage + "%");
					if (document.readyState == "complete") {
						loadingMask.css('width', 100 + "%");
						setTimeout(function() {
							loadingMask.animate({
								"opacity" : 0
							}, options.delayTime, function() {
								$(this).remove();
								console.log('Loading has been successful')
							})
						}, options.sleep)
					}
				}
			})
		}
	}
}